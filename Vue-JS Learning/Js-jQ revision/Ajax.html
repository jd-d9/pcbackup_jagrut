<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ajax learning</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js" integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js" integrity="sha384-cuYeSxntonz0PPNlHhBs68uyIAVpIIOZZ5JqeqvYYIcEL727kskC66kF92t6Xl2V" crossorigin="anonymous"></script>
</head>
<body>
    <div class="container p-5">
        <p id="paragraph" class="bg-dark text-white px-2"></p>
        <button class="btn btn-dark" onclick="getData()">Get user data</button>
        <!-- <button class="btn btn-dark" onclick="postData()">Post user data</button> -->
        <table class="table table-dark table-bordered">
            <thead>
                <th>Sr.</th>
                <th>Name</th>
                <th>Email</th>
                <th>Phone</th>
                <th>Username</th>
                <th>City</th>
                <th>Company</th>
            </thead>
            <tbody id="tableBody"></tbody>
        </table>
        
    </div>

    
    <script>
        function getData() {
            const xhttp = new XMLHttpRequest();
            xhttp.onload = function() {
                const userData = JSON.parse(this.responseText);
                let text;
                for(const i in userData) {
                    text += '<tr><td>' + userData[i].id + '</td><td>' + userData[i].name + '</td><td>' + userData[i].email + '</td><td>' + userData[i].phone + '</td><td>' + userData[i].username + '</td><td>' + userData[i].address.city + '</td><td>' + userData[i].company.name + ' ==> ' + userData[i].company.catchPhrase +'</td></tr>';
                }
                document.getElementById('tableBody').innerHTML = text;

                // document.getElementById('paragraph').innerHTML = this.getAllResponseHeaders();     // Get all header information from server
                document.getElementById('paragraph').innerHTML = 'Responce-Header :  ' + this.getAllResponseHeaders();     // Get specified information from server
                // console.log(this.status, this.statusText, this.readyState)
            }
            xhttp.open('GET', 'https://jsonplaceholder.typicode.com/users');
            xhttp.send();
        }
        // function postData() {
        //     const newUser = {
        //         id: '0111',
        //         name: 'Axay Patel',
        //         email: 'axaypatel112@gmail.com',
        //         phone: '9876543210',
        //         username: 'ap112'
        //     }
        //     const userData = JSON.stringify(newUser);
        //     const xhttp = new XMLHttpRequest();
        //     console.log(xhttp)
        //     xhttp.open('POST', 'https://jsonplaceholder.typicode.com/users');
        //     xhttp.send(userData);
        //     xhttp.onload = function() {
        //         if(xhttp.status === 201) {
        //             console.log('Data post successfully');
        //         }
        //     }
        // }
    </script>
</body>
</html>